(window.webpackJsonp=window.webpackJsonp||[]).push([[15,8],{504:function(t,e,n){var content=n(529);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("39f4975b",content,!0,{sourceMap:!1})},528:function(t,e,n){"use strict";n(504)},529:function(t,e,n){var r=n(23)(!1);r.push([t.i,".true[data-v-cc3a12b8]{--color-var:#fff}.false[data-v-cc3a12b8]{--color-var:#000}.render[data-v-cc3a12b8] svg *{stroke:var(--color-var)!important;fill:var(--color-var)!important}",""]),t.exports=r},530:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return l}));var r=n(18);n(62);function o(t,e){return c.apply(this,arguments)}function c(){return(c=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var r,data,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.$accessor.SET_LOADING(!0),t.next=4,e.$supabase.from("scores").insert(n);case 4:if(r=t.sent,data=r.data,!(o=r.error)){t.next=9;break}throw o;case 9:return t.abrupt("return",data);case 12:t.prev=12,t.t0=t.catch(0),alert(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function l(t,e){return d.apply(this,arguments)}function d(){return(d=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var r,data,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$supabase.from("scores").select("*").eq("user_id",n);case 3:if(r=t.sent,data=r.data,!(o=r.error)){t.next=8;break}throw o;case 8:return t.abrupt("return",data);case 11:t.prev=11,t.t0=t.catch(0),alert(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}},544:function(t,e,n){var content=n(576);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("7d52a98c",content,!0,{sourceMap:!1})},549:function(t,e,n){"use strict";n.r(e);var r=n(0).a.extend({mounted:function(){},computed:{dark:function(){return this.$vuetify.theme.dark}}}),o=(n(528),n(96)),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{class:"render ".concat(t.dark)},[t._t("default")],2)}),[],!1,null,"cc3a12b8",null);e.default=component.exports},575:function(t,e,n){"use strict";n(544)},576:function(t,e,n){var r=n(23)(!1);r.push([t.i,"#noterender[data-v-67568ce7]{height:45vh;width:100%}#noterender[data-v-67568ce7] svg{height:100%!important;width:100%!important}.piano_wrapper .piano_major_key[data-v-67568ce7]{height:100%!important;min-width:10px!important;width:4vw;max-width:64px}.piano_wrapper .piano_minor_key[data-v-67568ce7]{height:50%!important;min-width:4px!important;width:3vw;max-width:64px}.overlay[data-v-67568ce7]{position:absolute;top:0;left:0;width:100%;height:100%}",""]),t.exports=r},618:function(t,e,n){"use strict";n.r(e);var r=n(236),o=n(511),c=n(488),l=n(610),d=n(612),h=(n(317),n(533)),_=Object(h.a)("flex"),f=n(205),v=n(201),y=n(482),m=n(57),w=n(218),x=n(76),k=(n(22),n(64),n(3),n(71),n(30),n(86),n(35),n(39),n(0)),S=n(549),$=n(509),j=n(540),O=n(541),C=n(530),N=n(548),P=k.a.extend({components:{NoteRenderer:S.default,PlaySettings:N.default},data:function(){return{selected_note:null,score:0,fails:0,how_to_play:!0,synth:(new this.$tone.Synth).toDestination(),play_settings:new O.a}},mounted:function(){this.refresh()},methods:{refresh:function(){var t=this.$refs.noterender.$el;t.firstChild&&t.removeChild(t.firstChild);var e=new this.$vex.Factory({renderer:{elementId:"noterender",width:300,height:130}}),n=e.EasyScore(),r=e.System(),o=this.randomizer(),c=o.note,l=o.clef,d=o.accidental;if(this.selected_note=c,r.addStave({voices:[n.voice(n.notes("".concat(c.to_easyscore(d),"/w"),{clef:l,stem:"up"}))]}).addClef(l).addTimeSignature("4/4"),e.draw(),t.firstChild)try{var h=t.firstChild,_=h.attributes.viewBox.value.split(" ");_[0]=(Number(_[3])/-1.5).toString(),h.setAttribute("viewBox",_.join(" "))}catch(t){}if(this.play_settings.enable_audio)try{this.synth.triggerAttackRelease(c.to_easyscore(d),"8n")}catch(t){this.$tone.start()}},randomizer:function(){var t=[].concat(Object(x.a)(this.play_settings.enable_treble?[$.b.Treble]:[]),Object(x.a)(this.play_settings.enable_bass?[$.b.Bass]:[])),e=new j.b(this.play_settings.min_max_treble,this.play_settings.min_max_bass,t);return e.get_random()},play_note:function(t){var e;t===(null===(e=this.selected_note)||void 0===e?void 0:e.note)?(this.score++,this.refresh()):this.fails++},play_again:function(){this.score=0,this.fails=0,this.refresh()},get_note_letter_rot:function(){return this.array_rotate(Object(x.a)($.d),3)},array_rotate:function(t,e){return e%=t.length,t.slice(e,t.length).concat(t.slice(0,e))}},computed:{is_failed:function(){var t=this,e=this.fails>=3;return e&&this.$accessor.saved.user&&(this.$accessor.SET_LOADING(!0),Object(C.b)(this,{score:this.score,user_id:this.$accessor.saved.user.id}).then((function(){t.$accessor.SET_LOADING(!1)}))),e}},watch:{play_settings:{handler:function(){this.play_again()},deep:!0}}}),R=P,T=(n(575),n(96)),component=Object(T.a)(R,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e(l.a,{attrs:{"fill-height":""}},[e(d.a,{attrs:{width:"500"},model:{value:t.how_to_play,callback:function(e){t.how_to_play=e},expression:"how_to_play"}},[e(o.a,[e(c.c,[t._v("\n        How to Play\n      ")]),t._v(" "),e(c.b,[t._v("\n        Select the corresponding note displayed on the upper segment of the display using the Piano buttons on the bottom segment of the display. The game ends when you have made 3 mistakes, at which point the score is saved to your account if you are logged in.\n      ")]),t._v(" "),e(c.a,[e(y.a),t._v(" "),e(r.a,{attrs:{color:"primary",text:""},on:{click:function(){t.how_to_play=!1,t.$tone.start()}}},[t._v("\n          Close\n        ")])],1)],1)],1),t._v(" "),e(_,{staticClass:"d-flex flex-column",attrs:{"fill-height":""}},[e(o.a,[e(m.a,{attrs:{dense:""}},[e(w.a,[t._v("Score: "+t._s(t.score))]),t._v(" "),e(y.a),t._v(" "),e("play-settings",{model:{value:t.play_settings,callback:function(e){t.play_settings=e},expression:"play_settings"}}),t._v(" "),e(r.a,{attrs:{icon:"",to:"profile",title:"Saved Scores"}},[e(f.a,[t._v("mdi-content-save")])],1),t._v(" "),e(y.a),t._v(" "),e(w.a,[t._v("Mistakes: "+t._s(t.fails))])],1),t._v(" "),e("note-renderer",{directives:[{name:"show",rawName:"v-show",value:t.play_settings.enable_render,expression:"play_settings.enable_render"}],ref:"noterender",attrs:{id:"noterender"}},[e("div",{staticClass:"d-flex overlay pa-3"})])],1),t._v(" "),e(o.a,{staticClass:"mt-3 pa-3 d-flex justify-center overflow-x-auto text-no-wrap piano_wrapper",staticStyle:{height:"100%"}},t._l(t.get_note_letter_rot(),(function(n,i){return e(r.a,{key:i,class:"piano_".concat(1===n.length?"major":"minor","_key"),attrs:{color:1===n.length?"":"primary"},on:{click:function(e){return t.play_note(n)}}},[t._v("\n          "+t._s(n)+"\n        ")])})),1)],1),t._v(" "),e(v.a,{attrs:{absolute:"",value:t.is_failed}},[e(o.a,{staticClass:"pa-3 text-center"},[e(c.c,[t._v("\n        Score: "+t._s(t.score)+"\n      ")]),t._v(" "),e(r.a,{on:{click:function(e){return t.play_again()}}},[t._v("\n        OK\n      ")])],1)],1)],1)}),[],!1,null,"67568ce7",null);e.default=component.exports;installComponents(component,{PlaySettings:n(548).default})}}]);